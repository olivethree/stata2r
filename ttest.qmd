# t-test

## Brief Explanation

The t-test, proposed by William Sealy Gosset under the pseudonym "Student" in 1908, is used to determine if there is a significant difference between the means of two groups. It is commonly used when the sample sizes are small and the population variance is unknown.

| Statistic            | Description                                                                                |
|--------------------------------|----------------------------------------|
| **Proposed by**      | William Sealy Gosset (1908)                                                                |
| **Purpose**          | Compare means of two groups                                                                |
| **When to use**      | Small sample sizes, unknown population variance                                            |
| **Example question** | Is there a significant difference in user satisfaction between two versions of a software? |
| **Analytical goal**  | Determine if the mean satisfaction scores differ significantly between the two versions    |

## Research Question and Hypothesis

In today's fast-paced digital world, user experience (UX) is a critical factor that can make or break a product. Imagine a tech company, "InnovateTech," which has recently launched a new interface design for its flagship software. The company is keen to understand whether this new design truly enhances user satisfaction compared to the old design. 

InnovateTech has invested significant resources into redesigning its software interface, aiming to make it more intuitive, visually appealing, and user-friendly. The old design, while functional, received mixed reviews from users, with common complaints about its complexity and outdated look. The new design promises a sleek, modern interface with improved navigation and enhanced features.

To validate the effectiveness of the new design, InnovateTech conducts a study involving a diverse group of users. Participants are randomly assigned to use either the old or the new interface for a week. At the end of the week, they complete a detailed satisfaction survey. The company hopes that the results will provide clear insights into whether the new design meets user expectations and enhances their overall experience.

**Research Question:** Does the new interface design improve user satisfaction compared to the old design?

**Hypothesis:** Users will report higher satisfaction scores with the new interface design compared to the old design.

## R packages

```{r}
# Load the necessary packages 
library(tidyverse) # used for data manipulation and visualization
library(ggrain) # used for raincloud plots
library(cowplot) # for cowplot theme in ggplot
library(Statamarkdown) # to run Stata commands in an R environment

# Statamarkdown configuration
stataexe <- "C:/Program Files/Stata18/StataBE-64.exe" # Add your own path to the Stata executable here if you want to try this out
knitr::opts_chunk$set(engine.path=list(stata=stataexe))

# to install any missing packages go to the Terminal and run the command: install.packages("PACKAGE_NAME")
```

## Simulated Dataset

### In R

```{r}
set.seed(123)
n <- 30
old_design <- rnorm(n, mean = 70, sd = 10)
new_design <- rnorm(n, mean = 75, sd = 10)
data <- data.frame(
  group = rep(c("Old Design", "New Design"), each = n),
  satisfaction = c(old_design, new_design)
)
write.csv(data, "satisfaction_data.csv", row.names = FALSE)
```

### In Stata

```{stata message=FALSE}
clear
set seed 123
set obs 30
gen group = "Old Design"
gen satisfaction = rnormal(70, 10)
save old_design.dta, replace
```

```{stata message=FALSE}
clear
set obs 30
gen group = "New Design"
gen satisfaction = rnormal(75, 10)
save new_design.dta, replace
```

```{stata message=FALSE}
use old_design.dta
append using new_design.dta
save satisfaction_data.dta, replace
```

## Statistical Analysis

### Inspecting Data Descriptives and Plotting

#### In Stata

```{stata}
use satisfaction_data.dta
summarize satisfaction
graph box satisfaction, over(group)
```

#### In R

```{r}
data <- read.csv("satisfaction_data.csv")
summary(data$satisfaction)

p <- ggplot(data, aes(x = group, y = satisfaction)) +
  geom_boxplot() +
  theme_cowplot() +
  labs(title = "Satisfaction Scores by Group", x = "Group", y = "Satisfaction Score")
p
```

### T-test

#### In Stata

```{stata}
use satisfaction_data.dta
ttest satisfaction, by(group)
```

#### In R

```{r}
t.test(satisfaction ~ group, data = data)
```

## Explanation of Relevant Terms

| **Term**                | **Definition**                                                                                                                                                                                                                                      | **Common Misconception**                                                                                     |
|--------------|--------------------------------------|---------------------|
| **P-value**             | The probability of obtaining test results at least as extreme as the results actually observed, under the assumption that the null hypothesis is true.                                                                                              | The p-value is the probability that the null hypothesis is true.                                             |
| **Confidence Interval** | A range of values, derived from the sample data, that is believed to contain the true parameter value with a certain probability. If repeated samples were taken, a specified proportion of these intervals would contain the true parameter value. | A 95% confidence interval means there is a 95% probability that the true parameter lies within the interval. |
| **T-statistic**         | A ratio of the departure of the estimated value of a parameter from its hypothesized value to its standard error. The degrees of freedom (df) are the number of independent values that can vary in an analysis without breaking any constraints.   | The t-statistic directly tells us the probability of the null hypothesis being true.                         |

## Interpretation Questions

1.  What does a significant p-value indicate in the context of this t-test?
2.  How would you interpret the confidence interval in this analysis?

<button onclick="toggleVisibility(&#39;solutions&#39;)">

Show/Hide Solutions

</button>

::: {#solutions style="display:none;"}
**Solutions:**

1.  **Significant p-value**: A significant p-value indicates that the observed data is unlikely under the null hypothesis. This suggests that there is evidence against the null hypothesis, implying a statistically significant difference between the satisfaction scores of the two groups. However, it does not measure the probability that the null hypothesis is true or false.

2.  **Confidence interval**: The confidence interval provides a range of values that, based on the sample data, is likely to contain the true mean difference between the groups. If we were to repeat the experiment many times, we would expect a specified proportion (e.g., 95%) of these intervals to contain the true mean difference. It does not mean that there is a 95% probability that the true mean difference lies within this specific interval.
:::

```{=html}
<script>
function toggleVisibility(id) {
  var element = document.getElementById(id);
  if (element.style.display === "none") {
    element.style.display = "block";
  } else {
    element.style.display = "none";
  }
}
</script>
```
## Comparison Tables

### Assumptions and Statistical Analysis Commands

| Step                   | R Command                                                         | Stata Command                         |
|-----------------|-----------------------|--------------------------------|
| Descriptive Statistics | `summary(data$satisfaction)`                                      | `summarize satisfaction`              |
| Box Plot               | `ggplot(data, aes(x = group, y = satisfaction)) + geom_boxplot()` | `graph box satisfaction, over(group)` |
| T-Test                 | `t.test(satisfaction ~ group, data = data)`                       | `ttest satisfaction, by(group)`       |

### Simulated Dataset Generation

| Step          | R Command                                  | Stata Command                         |
|-----------------|-----------------------|--------------------------------|
| Generate Data | `rnorm(n, mean, sd)`                       | `rnormal(mean, sd)`                   |
| Save Data     | `write.csv(data, "satisfaction_data.csv")` | `save satisfaction_data.dta, replace` |
